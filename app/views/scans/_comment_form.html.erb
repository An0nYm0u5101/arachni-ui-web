<div id="add-scan-comment" class="modal hide fade" tabindex="-1" role="dialog"
     aria-labelledby="comment-label" aria-hidden="true">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="comment-label">Comment:</h3>
    </div>

    <%= simple_form_for( [@scan, Comment.new] ) do |f| %>
        <div class="modal-body">
            <%= f.error_notification %>
            <%= f.input :text, label: false,
                        hint: 'You can use <a href="http://daringfireball.net/' +
                              'projects/markdown/syntax">Markdown</a> for text formatting.' %>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <%= f.button :submit, class: 'btn btn-primary', value: 'Add comment' %>
        </div>
    <% end %>
</div>

<script type="text/javascript">
    // If we have a scan table then we're probably inside it and since
    // the table will keep being updated by AJAX we must move the modal dialog
    // out of it otherwise it'll keep vanishing with each AJAX refresh.
    $( '#add-scan-comment' ).each( function() {
        $( '#scans' ).parent().before( this );
    })
</script>
